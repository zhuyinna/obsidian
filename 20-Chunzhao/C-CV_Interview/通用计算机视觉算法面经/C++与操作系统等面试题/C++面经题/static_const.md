$static$与$const$是$C++$中的一个重要考点。


## 简述一下static 和const 关键字的作用？

		简述一下static 和const 关键字的作用？大多数应试者能正确回答出一部分，而很少的人能懂得并理解其他部分。
	
		这是一个应试者的严重的缺点，因为太多的应试者还没深入的了解过本地化数据和代码范围的好处和重要性。所以接下来我们详细聊聊static 和const 关键字的作用。



### static关键字的作用：

①在函数体内的static局部变量的作用范围为该函数体，该变量的内存只被分配一次。

②在模块内的static全局变量可以被模块内所用函数访问，但不能被模块外其它函数访问，它是一个本地的全局变量。

③在模块内的static函数只可被这一模块内的其它函数调用，这个函数的使用范围被限制在声明它的模块内

④在类中的static成员变量属于整个类所拥有，对类的所有对象只有一份拷贝（C++特有）

⑤在类中的static成员函数属于整个类所拥有，这个函数不接收this指针，因而只能访问类的static成员变量（C++特有）



用表格整理一下如下：

|                      | 生命周期                 | 作用域             | 初始化                    |
| -------------------- | ------------------------ | ------------------ | ------------------------- |
| 局部变量             | 从定义开始，到该模块结束 | 该模块内           | 默认为随机值              |
| static修饰的局部变量 | 从定义开始，到程序结束   | 该模块内           | 仅被初始化一次（默认为0） |
| 全局变量             | 从定义开始，到程序结束   | 文件作用域         | 默认为0                   |
| static修饰的全局变量 | 从定义开始，到程序结束   | 只能在该文件内使用 | 默认为0                   |



总结一下：

- static修饰的变量(无论局部变量或全局变量)，如果没有初始化，其值均为0。
- static修饰局部变量时, 只会被初始化一次，延长生命周期为程序结束
- static修饰全局变量时，限制变量只能在该文件内使用





### const关键字的作用

		很多面试官只要一听到被应试者说：“const意味着常数”，他们就能知道自己正在和一个业余者打交道。
	
		之前Dan Saks在他的文章里，十分详细的叙述了const的所有用法。如果你还未读到那篇文章，只要能说出const意味着“只读”就可以了。尽管这个答案不是完全的答案，但大多数面试官能接受它作为一个正确的答案。

**（如果你想知道更详细的答案，建议你仔细读一下Saks的文章。此处附一个翻译版本的连接：https://blog.csdn.net/bianbian17556231/article/details/5398039）**

		如果你能正确回答这个问题，那么来看看下面的声明，你是否都能说出他们是什么意思？

```C++
	const int a;			//a是一个常整型数
	int const a;			//a是一个常整型数

	const int *a;			//a是一个指向常整型数的指针（也就是，整型数是不可修改的，但指针可以）
	int * const a;			//a是一个指向整型数的常指针（也就是说，指针指向的整型数是可以修改的，但指针是不可修改的）

	int const * a const;	//a是一个指向常整型数的常指针（也就是说，指针指向的整型数是不可修改的，同时指针也是不可修改的）
```



		其实即使不用关键字 const，也还是能很容易写出功能正确的程序，那么为什么面试官或者C++大佬们还要如此看重关键字const呢？

有如下几个理由：
**1). 通过给优化器一些附加的信息，使用关键字const也许能产生更紧凑的代码。**
**2). 合理地使用关键字const可以使编译器很自然地保护那些不希望被改变的参数，防止其被无意的代码修改。简而言之，这样可以减少bug的出现。**



总结一下const的作用：

①防止一个变量的值被改变，可以使用const关键字。在定义该const变量时，通常需要对它进行初始化。

②对指针来说，可以指定指针本身为const，也可以指定指针所指的数据为const，或二者同时指定为const

③在函数声明中，const可以修饰形参，表明它是一个输入参数，在函数内部不能改变其值

④对于类的成员函数，若指定其为const类型，则表明其是一个常函数，不能修改类的 成员变量

⑤对于类的成员函数，有时候必须指定其返回值为const类型，以使得其返回值不为“左值”

```c++
 const classA operator*(const classA& a1,const classA& a2); 
 //operator*的返回结果必须是一个const对象

 classA a, b, c;		//如果不是，这样的变态代码也不会编译出错
 (a * b) = c; 			// 对a*b的结果赋值,显然不符合编程者的初衷，也没有任何意义
```



### 总结

static和const是大多数从事C/C++编程者既熟悉又陌生的关键字，说熟悉是因为在C基础时我们就已经认识了他们，说陌生是因为用了很久但其中具体的用法和必要性却还没有理解透彻。希望今天的内容对大家有所帮助。